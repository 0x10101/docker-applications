version: '2'

services:

 docker-ui:
  image: uifd/ui-for-docker
  restart: always
  privileged: true
#  ports:
#   - 9000:9000
  volumes:
   - /var/run/docker.sock:/var/run/docker.sock
  networks:
    mynet:
      ipv4_address: 172.25.0.2

 rabbitmq:
  image: marcelmaatkamp/rabbitmq-mqtt-ldap
  restart: always
  hostname: rabbitmq
#  ports:
#   - 15672:15672
  environment:
    RABBITMQ_NODENAME: rabbitmq@rabbitmq
  volumes:
   - ./volumes/rabbitmq/mnesia:/var/lib/rabbitmq/mnesia
  networks:
    mynet:
      ipv4_address: 172.25.0.3

 mysql:
  image: mysql
  restart: always
  hostname: mysql
  environment:
   - MYSQL_ROOT_PASSWORD=my-secret-pw
  volumes:
   - ./volumes/mysql:/var/lib/mysql
   - ./mysql:/docker-entrypoint-initdb.d
  networks:
    mynet:
      ipv4_address: 172.25.0.4

 nodered:
  build: raptor-node-red
  restart: always
  hostname: nodered
  depends_on:
   - rabbitmq
   - mysql
  links:
   - rabbitmq:rabbitmq
   - mysql:mysql
  ports:
   - 1880:1880
  volumes:
   - ./volumes/nodered:/node-red-data/
  environment: 
   - TELEGRAM_BOT=221611837:AAGCjDOlCF0kGKvh3TdgyimaeZAhbT2EXu8
   - TELEGRAM_BOT_SPARKY=221611837:AAGCjDOlCF0kGKvh3TdgyimaeZAhbT2EXu8
   - TELEGRAM_BOT_SPOT=257187787:AAH6ukcTh17o8TfWmLdmAV3MkAcmwHElS90
  networks:
    mynet:
      ipv4_address: 172.25.0.5

 phpmyadmin:
  image: phpmyadmin/phpmyadmin
  restart: always
  hostname: phpmyadmin
  depends_on:
   - mysql
  links:
   - mysql:db
  volumes:
   - ./volumes/phpmyadmin:/sessions
  networks:
    mynet:
      ipv4_address: 172.25.0.6

 nexus3:
  image: sonatype/nexus3
  volumes:
   - nexus3:/nexus-data
# ports: 
#  - 8081:8081
  networks:
   mynet:
    ipv4_address: 172.25.0.7

 phreeze:
  image: marcelmaatkamp/phreeze
  links:
   - mysql:mysql
  depends_on:
   - mysql
  volumes:
   - ./volumes/phreeze/showcase:/var/www/html/showcase
#  ports:
#   - 80:80
  networks:
   mynet:
     ipv4_address: 172.25.0.8

networks:
  mynet:
    driver: bridge
    ipam:
      config:
      - subnet: 172.25.0.0/24

volumes:
 nexus3:

